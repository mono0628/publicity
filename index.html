<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SpaceCocktails</title>
  <style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: black;
    overflow: hidden; /* evita scroll */
  }

  video {
    position: absolute;
    /*top: 50%;
    left: 50%;*/
    width: 100%; /* altura de la pantalla como ancho del video */
    height: 100%; /* ancho de la pantalla como altura del video */
    /*transform: rotate(90deg) translate(-50%, -50%);*/
    transform-origin: center center;
    object-fit: cover
  }
  #custom-controls {
  position: absolute;     /* sobre el video */
  bottom: 20px;           /* a 20px del borde inferior */
  right: 20px;            /* a 20px del borde derecho */
  z-index: 999;           /* encima del video */
}

#fullscreenButton {
  padding: 10px 20px;
  font-size: 18px;
  background: rgba(255, 255, 255, 0.8); /* semitransparente */
  color: black;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
</style>
</head>
<body>
  <video id="player" autoplay muted poster="imagen.png"></video>
  <div id="custom-controls">
    <button id="fullscreenButton">FullScreen</button>
  </div>  

  <script>
    const jsonURL = "https://raw.githubusercontent.com/mono0628/publicity/refs/heads/main/videos.json";

    let videos = [];
    let index = 0;
    const player = document.getElementById("player");
    const fullscreenButton = document.getElementById('fullscreenButton')

    fullscreenButton.addEventListener('click', () => {
      if(!document.fullscreenElement){
        if(player.requestFullscreen){
          player.requestFullscreen();
        }else if(player.webkitRequestFullscreen){
          player.webkitRequestFullscreen();
        }
      }else {
        if(document.exitFullscreen){
          document.exitFullscreen();
        }else if(player.webkitExitFullscreen){
          document.webkitExitFullscreen();
        }
      }
    })

    // Cargar lista de videos desde JSON
    fetch(jsonURL)
      .then(response => response.json())
      .then(data => {
        videos = data.videos;
        //player.src = videos[index];
        playVideo(index);
      });

    // FunciÃ³n para pasar al siguiente video
    /*player.addEventListener("ended", () => {
      index = (index + 1) % videos.length;
      player.src = videos[index];
      player.play();
    });*/
    let timer;

    function playVideo(i){
      const video = videos[i];
      player.src = video.src;
      player.play();

      if(timer) clearTimeout(timer);

      timer = setTimeout(() => {
        index = (index + 1) % videos.length;
        playVideo(index);
      },video.duration * 1000);
    }
  </script>
</body>
</html>
